<html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:title" content="Posts &#183;  Automate Everything"><meta property="og:site_name" content="Automate Everything"><meta property="og:url" content="https://blog.kvecchione.com/post/"><meta property="og:type" content="website"><title>Posts &#183; Automate Everything</title><meta name=description content><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://blog.kvecchione.com/images/favicon.png><link rel=icon href=https://blog.kvecchione.com/images/favicon.png type=image/x-icon><link rel=apple-touch-icon href=https://blog.kvecchione.com/images/apple-touch-icon.png><link rel=stylesheet type=text/css href=https://blog.kvecchione.com/css/style.css><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata"><link href=index.xml rel=alternate type=application/rss+xml title="Automate Everything"><meta name=generator content="Hugo 0.75.1"><link rel=canonical href=https://blog.kvecchione.com/post/><script async src="https://www.googletagmanager.com/gtag/js?id=G-CEMVCX9GBW"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-CEMVCX9GBW');</script></head><div id=particles-js></div><div class=site-wrapper><header class="main-header no-cover"><nav class="main-nav overlay clearfix"></nav><div class=vertical><div class="main-header-content inner"><h1 class=page-title><a href=https://blog.kvecchione.com/></a></h1><h2 class=page-description></h2></div></div></header><main id=content class=content role=main><div class="extra-pagination inner"><nav class=pagination role=navigation><span class=page-number>Page 1 of 1</span></nav></div><article class="post post"><header class=post-header><h1 class=post-title>The Homelab</h1><section class=post-meta><time class=post-date datetime=2020-11-21>2020-11-21</time></section></header><section class=post-content><p>I&rsquo;m going to try update this post over time since I get a lot of questions about my home lab. I change things fairly frequently as I test out new technologies and tools, so I&rsquo;ll try to keep the data here updated as best I can so you can see what I&rsquo;m working on.</p><h2 id=physical>Physical</h2><h4 id=the-cluster>The Cluster</h4><p>Proxmox VE builds in Ceph distributed storage, so I&rsquo;ve hyperconverged by having a 256GB SSD in each machine and running the VMs off the distributed volume. I also run CephFS on top of this volume for Kubernetes shared storage.</p><h5 id=pve01>pve01</h5><ul><li>Dell PowerEdge T20 Server</li><li>Xeon E3-1225 (4c)</li><li>16GB RAM</li><li>Proxmox VE 6.2</li></ul><h5 id=pve02pve03>pve02/pve03</h5><ul><li>Dell Optiplex 7020 SFF i5-4590 (4c)</li><li>256GB SSD</li><li>16GB RAM</li><li>Proxmox VE 6.2</li></ul><h3 id=nas>NAS</h3><h5 id=nas01---synology-ds1819-nas>nas01 - Synology DS1819+ NAS</h5><ul><li>Media NAS</li><li>6 x 4TB WD RED HDD (4 active, 2 hot spares)</li><li>Docker for Homebridge</li><li>Plex (backup)</li></ul><h3 id=endpoints>Endpoints</h3><h5 id=einstein---windows-10---gaming-desktop>einstein - Windows 10 - Gaming Desktop</h5><ul><li>Intel i5 2500 (Sandy Bridge still going strong since 2012!)</li><li>16G RAM</li><li>Gigabyte GTX 960 Video Card</li></ul><h5 id=ironman---macbook-pro-16-2019>ironman - MacBook Pro 16 (2019)</h5><ul><li>Daily Driver</li></ul><h2 id=virtual>Virtual</h2><h5 id=kmsnn---ubuntu-1804---kubernetes-nodes>k[ms][nn] - Ubuntu 18.04 - Kubernetes Nodes</h5><ul><li>3-node Kubernetes 1.18 cluster with RKE2</li><li>Containerized applications:<ul><li>Nginx Ingress (internal and external)</li><li>Certificate Manager</li><li>MetalLB</li><li>Kubernetes Dashboard</li><li>OpenFaaS</li><li>Harbor</li><li>ArgoCD</li><li>Gitea</li><li>Tautulli</li><li>Calibre Web</li><li>Wekan</li><li>Bookstack</li><li>Invoice Ninja</li><li>MySQL (shared)</li><li>Postgres (shared)</li><li>MongoDB (shared)</li><li>Ombi</li><li>Minio</li><li>Openeats</li><li>ddclient</li><li>&mldr;lots more</li></ul></li></ul><h5 id=lb01---alpine-311---haproxy>lb01 - Alpine 3.11 - HAProxy</h5><ul><li>HTTP/TCP proxy for Kubernetes</li></ul><h5 id=dns01---debian-10---pihole-dns>dns01 - Debian 10 - PiHole DNS</h5><ul><li>PiHole DNS/Adblock server</li></ul><h5 id=plex01---ubuntu-1804---plex>plex01 - Ubuntu 18.04 - Plex</h5><ul><li>Plex Media Server</li></ul><h5 id=backup01---ubuntu-1804---backups>backup01 - Ubuntu 18.04 - Backups</h5><ul><li>Runs various backup jobs</li></ul><h2 id=3d-printer>3D Printer</h2><p>Creality Ender 5 Pro</p><ul><li>Embedded Raspberry Pi 4 with OctoPrint</li></ul></section></article><article class="post post"><header class=post-header><h1 class=post-title>ddclient and Cloudflare</h1><section class=post-meta><time class=post-date datetime=2019-09-02>2019-09-02</time></section></header><section class=post-content><p>I use a ddclient container in my Kubernetes cluster to maintain my IP with Cloudflare&rsquo;s free DNS hosting. I recently noticed issues with my configuration of ddclient for use with DNS hosted in Cloudflare. For anyone that finds this and sees this error, this is what resolved it for me:</p><p>Error:
<code>WARNING: file /var/cache/ddclient/ddclient.cache, line 3: Invalid Value for keyword 'ip' = ''</code></p><p>It appears this is due to the Cloudflare API URL changing, so ddclient can&rsquo;t get the current IP.</p><p>New config file:</p><pre><code>daemon=300
syslog=yes
ssl=yes
use=web,web=ipinfo.io/ip
protocol=cloudflare
# **This is the important change**
server=api.cloudflare.com/client/v4
login=&lt;email&gt;
password=&lt;password&gt;
zone=kvecchione.com
ddns.kvecchione.com
</code></pre><p>Hope this helps you out!</p></section></article><article class="post post"><header class=post-header><h1 class=post-title>Static Website Migration</h1><section class=post-meta><time class=post-date datetime=2018-06-03>2018-06-03</time></section></header><section class=post-content><p>I&rsquo;ve been hosting my websites at home for some time now, mostly with Wordpress, and I&rsquo;ve been pretty happy with it. I recently migrated my Wordpress sites from Apache to nginx then to Docker, each an improvement along the way, but then I had an idea to put one of my sites (<a href=http://www.vecchione.us>www.vecchione.us</a>) on Amazon S3/Google Cloud Storage to help speed it up and help secure it better, but since my site is Wordpress, I didn&rsquo;t think I could - well I was wrong.</p><p>I found a Wordpress plugin, Simply Static, which allows you to convert your Wordpress website to static html files which worked great for me since my site is static anyway. I ran the converter on relative mode and it dumped out 10MB of data. Success! It&rsquo;s actually extremely efficient and appears to just crawl the site and gather the output, then gives you a link to download a ZIP - pretty cool.</p><p>I then looked into where to put the data, knowing that S3 and GCS both allow for static website hosting from within their storage repositories for a <em>very</em> low price. As I was copying the data to Google, I found out about GitHub Pages and their new features custom DNS and enforced HTTPS. Being <em>completely</em> free, I figured I&rsquo;d have to try this out first.</p><p>Turns out it&rsquo;s awesome! My static files are now hosted on GitHub, and my DNS resolves to their servers directly. I enabled HTTPS which triggers the system to retrieve a custom LetsEncrypt SSL cert for my domain and use it. For services like comments and forms, you can&rsquo;t use normal Wordpress built-ins or plugins, but you can use third party services like Disqus or Google Forms.</p><p>So then I needed to figure out how to make updates to the site if needed, since I really don&rsquo;t feel like digging into the generated HTML if I could help it, so I updated my site URLs on my Docker hosted website to use it as a staging environment. I make the change, run the static output generator, copy it over to my git repo, commit, push, done!</p><p>My next project will be to use some sort of CI pipeline to attempt to automate this process a bit, so we&rsquo;ll see where that goes. In the meantime I migrated my dad&rsquo;s site using the same mechanism in about 30 minutes.</p><p>I then moved onto this site which was previously hosted on Ghost on Docker. Looking at GitHub pages led me to Jekyll which is where this site is hosted now. I&rsquo;m still a newbie to the technology, but the site looks pretty sweet after only a day. I love that it generates a static site (secure and fast!) but still maintains so many great blogging features. So far so good!</p></section></article><nav class=pagination role=navigation><span class=page-number>Page 1 of 1</span></nav></main><footer class="site-footer clearfix"><div align=center><a href=https://github.com/kvecchione><span class=icon-github style=color:#000;font-size:2em></span></a>&nbsp;
<a href=https://linkedin.com/umkvec><span class=icon-linkedin style=color:#000;font-size:2em></span></a>&nbsp;
<a href=https://blog.kvecchione.com/index.xml><span class=icon-feed style=color:#000;font-size:2em></span></a></div><div align=center><section class=copyright><a href>Automate Everything</a> by Kevin Vecchione</section></div></footer><script type=text/javascript src=https://blog.kvecchione.com/js/jquery.js></script><script type=text/javascript src=https://blog.kvecchione.com/js/particles.min.js></script><script type=text/javascript src=https://blog.kvecchione.com/js/particles.js></script></body></html>